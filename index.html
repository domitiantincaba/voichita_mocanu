<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vivi â€“ Legenda Vie</title>

<style>
/* ===== RESET ===== */
body{
    margin:0;
    background:linear-gradient(270deg,#050505,#250025,#050505);
    background-size:600% 600%;
    animation:bgMove 15s ease infinite;
    color:white;
    font-family:Arial, sans-serif;
    overflow-x:hidden;
}

/* ===== BACKGROUND ===== */
@keyframes bgMove{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

/* ===== PARTICULE ===== */
.particle{
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    opacity:.7;
    animation:star 8s linear infinite;
}
@keyframes star{
    from{transform:translateY(100vh);}
    to{transform:translateY(-10vh);}
}

/* ===== CONTAINER ===== */
.container{
    width:100vw;
    min-height:100vh;
    padding:20px;
    padding-top:6vh;
    text-align:center;

    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    gap:14px;

    position:relative;
    z-index:2;
}

/* ===== TITLURI ===== */
h1{
    color:#ff3cac;
    font-size:clamp(38px,7vw,60px);
    margin:0;
}
h2{
    color:#ffd4ff;
    margin:0;
    font-size:clamp(16px,4vw,26px);
}

/* ===== PLAYER ===== */
.player{
    width:80%;
    padding:18px;
    border-radius:20px;
    background:rgba(255,255,255,.05);
    box-shadow:0 0 18px rgba(255,60,172,.6);
    transition:.08s ease;
}

/* ===== GLOW PE BEAT ===== */
.player.beat{
    box-shadow:0 0 45px rgba(255,60,172,1);
    transform:scale(1.01);
}

/* ===== AUDIO ===== */
audio{
    width:100%;
    margin-top:10px;
    height:20px;
}

/* ===== BUTON PLAY / PAUSE ===== */
.playBtn{
    width:100%;
    padding:20px;
    border-radius:40px;
    border:none;
    background:#ff3cac;
    font-weight:bold;
    font-size:clamp(16px,4vw,22px);
    cursor:pointer;
}

/* ===== EQUALIZER ===== */
.bars{
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    height:50px;
    width:100%;
    margin:70px 0 8px;
}
.bar{
    width:6%;
    background:#ff3cac;
    border-radius:5px;
    height:10px;
    transition:height .05s ease;
}

/* ===== FULLSCREEN ===== */
.fullBtn{
    background:none;
    border:none;
    color:#ff3cac;
    font-size:16px;
    margin-top:6px;
}

/* ===== ROTATE-LOCK OVERLAY ===== */
.rotateLock{
    position:fixed;
    inset:0;
    background:black;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    z-index:9999;
    font-size:22px;
    padding:20px;
    display:none;
}
.rotateLock.show{
    display:flex;
}

/* ===== MOBILE STRICT ===== */
@media (max-width:600px){
    .bars{ height:42px; }
}
</style>
</head>

<body>

<div class="rotateLock" id="rotateLock">
ðŸ“± RoteÈ™te telefonul Ã®n poziÈ›ie verticalÄƒ
</div>

<script>
for(let i=0;i<120;i++){
    let p=document.createElement("div");
    p.className="particle";
    p.style.left=Math.random()*100+"vw";
    p.style.animationDelay=Math.random()*8+"s";
    p.style.opacity=Math.random();
    document.body.appendChild(p);
}
</script>

<div class="container">

<h1>ðŸŽ¸ Vivi</h1>
<h2>Legenda Vie a AsistenÈ›ei Sociale din BrÄƒila</h2>

<div class="player" id="player">

<button class="playBtn">â–¶ PLAY</button>

<div class="bars" id="bars"></div>

<audio id="audio">
    <source src="vivi-legenda-vie.mp3" type="audio/mpeg">
</audio>

<button class="fullBtn">â›¶ Fullscreen</button>

</div>

</div>

<script>
const audio = document.getElementById("audio");
const playBtn = document.querySelector(".playBtn");
const barsContainer = document.getElementById("bars");
const fullBtn = document.querySelector(".fullBtn");
const player = document.getElementById("player");
const rotateLock = document.getElementById("rotateLock");

// CREATE BARS
const BARS = 16;
for(let i=0;i<BARS;i++){
    let b=document.createElement("div");
    b.className="bar";
    barsContainer.appendChild(b);
}
const bars=[...document.querySelectorAll(".bar")];

// WEB AUDIO
let ctx, src, analyser, data;

function setupAudio(){
    ctx = new (window.AudioContext||window.webkitAudioContext)();
    src = ctx.createMediaElementSource(audio);
    analyser = ctx.createAnalyser();
    analyser.fftSize = 64;

    src.connect(analyser);
    analyser.connect(ctx.destination);

    data = new Uint8Array(analyser.frequencyBinCount);
}

function animate(){
    analyser.getByteFrequencyData(data);

    // Equalizer
    bars.forEach((bar,i)=>{
        bar.style.height = Math.max(data[i]/3,8)+"px";
    });

    // === BEAT DETECTION (bass power) ===
    let bass = 0;
    for(let i=0;i<4;i++){
        bass += data[i];
    }

    if(bass > 380){
        player.classList.add("beat");
    }else{
        player.classList.remove("beat");
    }

    requestAnimationFrame(animate);
}

// PLAY / PAUSE TOGGLE
playBtn.onclick = ()=>{
    if(!ctx){
        setupAudio();
        animate();
    }

    if(audio.paused){
        audio.play();
        playBtn.textContent="â¸ PAUSE";
    }else{
        audio.pause();
        playBtn.textContent="â–¶ PLAY";
    }
};

// FULLSCREEN
fullBtn.onclick=()=>{
    document.body.requestFullscreen();
};

// ROTATE LOCK
function checkOrientation(){
    if(window.innerWidth > window.innerHeight){
        rotateLock.classList.add("show");
    }else{
        rotateLock.classList.remove("show");
    }
}
window.addEventListener("resize",checkOrientation);
checkOrientation();
</script>

</body>
</html>
