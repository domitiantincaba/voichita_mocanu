<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>ðŸ”¥ ROCK PLAYER</title>

<style>

/* ============== RESET ============== */
*{box-sizing:border-box;}
body{
    margin:0;
    background:
    radial-gradient(circle at top,#1a0000 0%,#050000 40%,#000 100%);
    color:#fff;
    font-family:Arial,Helvetica,sans-serif;
    overflow-x:hidden;
}

/* ============== SMOKE PARTICLES ============== */
.ember{
    position:absolute;
    bottom:-10px;
    width:3px;
    height:3px;
    background:red;
    border-radius:50%;
    opacity:.7;
    animation:rise 6s linear infinite;
}

@keyframes rise{
    from{transform:translateY(0) scale(1);opacity:.8;}
    to{transform:translateY(-110vh) scale(2);opacity:0;}
}

/* ============== MAIN LAYOUT ============== */
.wrapper{
    width:100%;
    max-width:460px;
    margin:auto;
    padding:12px;
    min-height:100vh;

    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
}

/* ============== TITLU ============== */
.logo{
    font-size:42px;
    font-weight:900;
    letter-spacing:2px;
    color:#ff1616;
    text-shadow:0 0 25px crimson;
    margin:18px 0 2px;
}

.subtitle{
    font-size:16px;
    text-transform:uppercase;
    opacity:.75;
}

/* ============== PLAYER ============== */
.player{
    width:100%;
    margin-top:30px;
    padding:16px;
    border-radius:12px;

    background:linear-gradient(145deg,#130000,#000);
    border:2px solid #ff1616;
    box-shadow:0 0 15px #ff1616;

    transition:.08s ease;
}

.player.beat{
    box-shadow:
        0 0 25px crimson,
        0 0 45px red;
    transform:scale(1.02);
}

/* ============== PLAY BTN ============== */
.playBtn{
    width:100%;
    background:#ff1616;
    border:none;
    border-radius:50px;
    padding:14px;
    color:#000;
    font-weight:900;
    font-size:22px;
    letter-spacing:2px;
    cursor:pointer;
}

/* ============== EQUALIZER ============== */
.eq{
    width:100%;
    height:52px;
    margin:16px 0 10px;
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
}
.bar{
    width:5%;
    height:10px;
    background:linear-gradient(to top,#700000,#ff1616);
    border-radius:3px;
    transition:height 0.05s linear;
}

/* ============== AUDIO ============== */
audio{
    width:100%;
    height:44px;
}

/* ============== FULLSCREEN BTN ============== */
.fullBtn{
    width:100%;
    background:none;
    border:none;
    color:#ff1616;
    font-size:16px;
    margin-top:8px;
}

/* ============== ROTATE LOCK ============== */
.rotateLock{
    position:fixed;
    inset:0;
    background:#000;
    color:#fff;
    display:none;
    align-items:center;
    justify-content:center;
    text-align:center;
    z-index:9999;
    font-size:22px;
}
.rotateLock.show{display:flex;}

</style>
</head>
<body>

<!-- ROTATE LOCK -->
<div id="rotateLock" class="rotateLock">
ðŸ“µ Èšine telefonul vertical  
ROCK MODE
</div>

<!-- EMBERS -->
<script>
for(let i=0;i<100;i++){
    let e=document.createElement("div");
    e.className="ember";
    e.style.left=Math.random()*100+"vw";
    e.style.animationDelay=Math.random()*6+"s";
    e.style.opacity=Math.random();
    document.body.appendChild(e);
}
</script>

<div class="wrapper">

<div class="logo">ðŸ”¥  Vivi</div>
<div class="subtitle">Legenda Vie a AsistenÈ›ei Sociale din BrÄƒila</div>

<div class="player" id="player">

<button class="playBtn">â–¶ PLAY</button>

<div class="eq" id="eq"></div>

<audio id="audio" preload="auto">
    <source src="vivi-legenda-vie.mp3" type="audio/mpeg">
</audio>

<button class="fullBtn">â›¶ FULLSCREEN</button>

</div>

</div>

<script>

const audio = document.getElementById("audio");
const playBtn = document.querySelector(".playBtn");
const eqBox   = document.getElementById("eq");
const player = document.getElementById("player");
const rotate = document.getElementById("rotateLock");

/* ============== CREATE BARS ============== */
const BAR_COUNT = 16;
for(let i=0;i<BAR_COUNT;i++){
    let b=document.createElement("div");
    b.className="bar";
    eqBox.appendChild(b);
}
const bars = document.querySelectorAll(".bar");

/* ============== WEB AUDIO ============== */
let ctx,src,analyser,data;

function setup(){
    ctx = new (window.AudioContext||window.webkitAudioContext)();
    src = ctx.createMediaElementSource(audio);

    analyser = ctx.createAnalyser();
    analyser.fftSize = 64;

    src.connect(analyser);
    analyser.connect(ctx.destination);

    data = new Uint8Array(analyser.frequencyBinCount);
}

function animate(){
    analyser.getByteFrequencyData(data);

    bars.forEach((bar,i)=>{
        bar.style.height = Math.max(data[i]/2.5,8)+"px";
    });

    // Beat glow = bass explosion
    let power=0;
    for(let i=0;i<4;i++) power+=data[i];

    if(power>360) player.classList.add("beat");
    else player.classList.remove("beat");

    requestAnimationFrame(animate);
}

/* ============== PLAY PAUSE ============== */
playBtn.onclick=()=>{

    if(!ctx){
        setup();
        animate();
    }

    if(audio.paused){
        audio.play();
        playBtn.textContent="â¸ PAUSE";
    }
    else{
        audio.pause();
        playBtn.textContent="â–¶ PLAY";
    }
}

/* ============== FULLSCREEN ============== */
document.querySelector(".fullBtn").onclick=()=>{
    document.body.requestFullscreen();
}

/* ============== ORIENTATION LOCK ============== */
function checkOrientation(){
    if(innerWidth>innerHeight)
        rotate.classList.add("show");
    else
        rotate.classList.remove("show");
}

addEventListener("resize",checkOrientation);
checkOrientation();

</script>

</body>
</html>
